---
title: Agents/Skills/Commands Adoption Assessment (agents-to-build → MegaCampusAI)
date: 2025-10-23
status: Proposed
---

# Context and Schema Rules

This decision evaluates proposals from the `agents-to-build` repository against the canonical schema and orchestration rules of `MegaCampusAI`.

Authoritative schema reference: `.claude/agents/meta-agent-v3.md`.

Key rules and conventions (summary):
- Agent types: worker, orchestrator, simple.
- YAML frontmatter required for all agents: `name`, `description`, `model: sonnet`, `color`.
- File locations:
  - Workers: `.claude/agents/{domain}/workers/{name}.md`
  - Orchestrators: `.claude/agents/{domain}/orchestrators/{name}.md`
  - Simple agents: `.claude/agents/{name}.md`
- Worker structure (must include): Plan file read (Phase 1) → Execute work → Internal validation → Structured report → Return control. Use skills: `run-quality-gate`, `generate-report-header`, `rollback-changes`.
- Orchestrator structure (must include): Pre-flight, phase cycles, quality gates with blocking logic, TodoWrite progress, plan validation via `validate-plan-file`, explicit Return-Control pattern; do NOT directly invoke workers via Task tool.
- Temporary files and plan/report locations under `.tmp/current/` with archival under `.tmp/archive/`.
- MCP usage: Workers must use MCP for implementation; orchestrators may use MCP for validation/guidance; simple agents use MCP when domain-relevant.
- Validation checklist: frontmatter complete; required phases/patterns per type; required skills referenced; error handling; standardized report templates for workers/orchestrators.


# Inventories

## MegaCampusAI

Agents (`.claude/agents/`):
- `.claude/agents/database-architect.md`
- `.claude/agents/integration-tester.md`
- `.claude/agents/health/orchestrators/bug-orchestrator.md`
- `.claude/agents/health/orchestrators/dependency-orchestrator.md`
- `.claude/agents/health/orchestrators/dead-code-orchestrator.md`
- `.claude/agents/health/orchestrators/security-orchestrator.md`
- `.claude/agents/health/workers/dead-code-remover.md`
- `.claude/agents/health/workers/security-scanner.md`
- `.claude/agents/health/workers/bug-fixer.md`
- `.claude/agents/health/workers/dependency-updater.md`
- `.claude/agents/health/workers/dependency-auditor.md`
- `.claude/agents/health/workers/vulnerability-fixer.md`
- `.claude/agents/health/workers/bug-hunter.md`
- `.claude/agents/health/workers/dead-code-hunter.md`
- `.claude/agents/performance-optimizer.md`
- `.claude/agents/mobile-fixes-implementer.md`
- `.claude/agents/meta-agent-v3.md`
- `.claude/agents/visual-effects-creator.md`
- `.claude/agents/fullstack-nextjs-specialist.md`
- `.claude/agents/mobile-responsiveness-tester.md`
- `.claude/agents/technical-writer.md`
- `.claude/agents/api-builder.md`
- `.claude/agents/kfc/spec-test.md`
- `.claude/agents/kfc/spec-judge.md`
- `.claude/agents/infrastructure-specialist.md`
- `.claude/agents/kfc/spec-impl.md`
- `.claude/agents/kfc/spec-tasks.md`
- `.claude/agents/kfc/spec-design.md`
- `.claude/agents/kfc/spec-requirements.md`
- `.claude/agents/kfc/spec-system-prompt-loader.md`
- `.claude/agents/development/workers/code-reviewer.md`
- `.claude/agents/development/workers/skill-builder-v2.md`

Skills (`.claude/skills/`):
- `parse-git-status/SKILL.md`
- `parse-error-logs/SKILL.md`, `parse-error-logs/patterns.json`
- `render-template/SKILL.md`
- `validate-plan-file/SKILL.md`, `validate-plan-file/schema.json`
- `format-commit-message/SKILL.md`, `format-commit-message/template.md`
- `format-todo-list/SKILL.md`, `format-todo-list/template.json`
- `generate-report-header/SKILL.md`, `generate-report-header/template.md`
- `calculate-priority-score/SKILL.md`, `calculate-priority-score/scoring-matrix.json`
- `generate-changelog/SKILL.md`, `generate-changelog/commit-mapping.json`
- `extract-version/SKILL.md`
- `parse-package-json/SKILL.md`, `parse-package-json/schema.json`
- `format-markdown-table/SKILL.md`, `format-markdown-table/examples.md`
- `rollback-changes/SKILL.md`, `rollback-changes/changes-log-schema.json`
- `validate-report-file/SKILL.md`, `validate-report-file/schema.json`
- `run-quality-gate/SKILL.md`, `run-quality-gate/gate-mappings.json`

Commands (`.claude/commands/`):
- `speckit.constitution.md`
- `health-deps.md`, `health-cleanup.md`, `health-bugs.md`, `health-security.md`
- `speckit.analyze.md`, `speckit.clarify.md`, `speckit.checklist.md`, `speckit.specify.md`, `speckit.implement.md`, `speckit.tasks.md`, `speckit.plan.md`
- `translate-doc.md`, `push.md`

## agents-to-build

Agents (`.claude/agents/`):
- `.claude/agents/product-manager.md`
- `.claude/agents/learning-designer.md`
- `.claude/agents/logging-and-audit.md`
- `.claude/agents/hr-people-ops.md`
- `.claude/agents/ai-automation.md`
- `.claude/agents/system-architect.md`

Skills (`.claude/skills/`):
- `acceptance-criteria-checker/SKILL.md`, `CHECKLIST.md`
- `audit-event-schema/SKILL.md`, `template.md`
- `c4-diagram-template/SKILL.md`, `template.md`

Commands (`.claude/commands/`):
- `audit-setup.md`
- `arch-c4.md`
- `ac-check.md`


# Fit and Adoption Assessment

Legend: Conforms (Y/N) refers to meta-agent-v3 schema/patterns, including required frontmatter and correct file path by type.

Agents
- product-manager (simple) — Path: `.claude/agents/product-manager.md`
  - Conforms: N (missing `model: sonnet` in frontmatter)
  - Required changes: Add `model: sonnet`. Optional: add MCP guidance references where relevant (already references speckit/KFC; acceptable).
  - Overlap: Extends speckit workflow; no duplicate in MegaCampusAI.
  - Status: Needs adjustment.
- learning-designer (simple) — Path: `.claude/agents/learning-designer.md`
  - Conforms: N (missing `model: sonnet`)
  - Required changes: Add `model: sonnet`. Align with `docs/LMSv1.md` references (already noted).
  - Overlap: New domain (instructional design). Complements `technical-writer`.
  - Status: Needs adjustment.
- logging-and-audit (simple) — Path: `.claude/agents/logging-and-audit.md`
  - Conforms: N (missing `model: sonnet`)
  - Required changes: Add `model: sonnet`. Already aligns with skills/commands proposed; references `audit-event-schema` and `/audit-setup`.
  - Overlap: Complements `security-orchestrator` and `infrastructure-specialist`; fills audit/compliance gap.
  - Status: Needs adjustment.
- hr-people-ops (simple) — Path: `.claude/agents/hr-people-ops.md`
  - Conforms: N (missing `model: sonnet`)
  - Required changes: Add `model: sonnet`.
  - Overlap: New domain (people ops). No duplicates.
  - Status: Needs adjustment.
- ai-automation (simple) — Path: `.claude/agents/ai-automation.md`
  - Conforms: N (missing `model: sonnet`)
  - Required changes: Add `model: sonnet`. Content fits simple agent (planning/evals); not an orchestrator.
  - Overlap: Complements `meta-agent-v3`, `skill-builder-v2`. No duplication.
  - Status: Needs adjustment.
- system-architect (simple) — Path: `.claude/agents/system-architect.md`
  - Conforms: N (missing `model: sonnet`)
  - Required changes: Add `model: sonnet`. References `arch-c4` command; delegates well.
  - Overlap: Coordinates existing `database-architect`, `infrastructure-specialist`, `api-builder`. Fills architecture leadership gap.
  - Status: Needs adjustment.

Skills
- acceptance-criteria-checker — Path: `.claude/skills/acceptance-criteria-checker/SKILL.md`
  - Conforms: Y (skill folder and SKILL.md). Adds CHECKLIST.md. No conflicts.
  - Status: Ready for adoption.
- audit-event-schema — Path: `.claude/skills/audit-event-schema/SKILL.md`
  - Conforms: Y (skill folder and SKILL.md + template). No conflicts.
  - Status: Ready for adoption.
- c4-diagram-template — Path: `.claude/skills/c4-diagram-template/SKILL.md`
  - Conforms: Y (skill folder and SKILL.md + template). No conflicts.
  - Status: Ready for adoption.

Commands
- ac-check — Path: `.claude/commands/ac-check.md`
  - Conforms: Y (command doc with frontmatter `description`). Leverages acceptance-criteria-checker.
  - Status: Ready for adoption.
- arch-c4 — Path: `.claude/commands/arch-c4.md`
  - Conforms: Y (command doc with frontmatter). Uses c4-diagram-template.
  - Status: Ready for adoption.
- audit-setup — Path: `.claude/commands/audit-setup.md`
  - Conforms: Y (command doc with frontmatter). Uses audit-event-schema.
  - Status: Ready for adoption.


# Roadmap Coverage Check

Source for requirements (outdated roadmap, used only for requirements): `agents-to-build/docs/Дорожная карта LMS – v1 → v2 → AI‑будущее.md`.

Requirement → Covered by agent(s) → Status
- Tenant separation (multi-tenant, RLS) → `database-architect`, `system-architect` → Satisfied
- Data residency (deploy in required regions) → `infrastructure-specialist`, `system-architect` → Partial
- RBAC/ABAC (role/attribute-based access) → `database-architect` (RLS policies), `security-orchestrator`, `system-architect` → Partial
- Audit logs and taxonomy → `logging-and-audit`, `audit-event-schema` (skill), `audit-setup` (command) → Satisfied
- SSO/SAML for Enterprise → `system-architect` (design), `api-builder`, `infrastructure-specialist` → Partial
- SLA/operability (SLO/SLI, monitoring) → `infrastructure-specialist`, `logging-and-audit`, `integration-tester` → Partial

Coverage: 2 Satisfied, 4 Partial, 0 Missing

Notes:
- Partial items are feasible with existing agents but would benefit from explicit ownership and patterns (identity/SSO, residency posture, RBAC matrices, SLA instrumentation).


# Alignment Gaps and Recommendations

Gaps
- Frontmatter compliance: All six proposed agents lack `model: sonnet`.
- Identity & SSO depth: No dedicated agent for SSO/SAML integration patterns, IdP mappings, SCIM, and SSO test plans.
- RBAC/ABAC articulation: RLS exists, but role/attribute matrices, enforcement points, and policy-as-code guidance are not centralized.
- SLA instrumentation: No explicit agent tying SLI/SLO budgeting to monitors, alerts, and runbooks.
- Data residency posture: No explicit checklist/templates mapping cloud regions, storage, backups, and data flows to residency constraints.

Recommendations
- Add `model: sonnet` to: product-manager, learning-designer, logging-and-audit, hr-people-ops, ai-automation, system-architect.
- Adopt skills and commands as-is; they fit schema and fill important gaps (architecture diagrams, audit taxonomy, AC validation).
- Introduce targeted agents:
  - identity-integrations (simple): SSO/SAML, SCIM, IdP mappings, session lifetimes, JIT provisioning, test matrix.
  - rbac-abac-designer (simple): Role/attribute matrix, enforcement points across API, DB (RLS), UI, policy-as-code samples.
  - sla-operations (simple): Define SLIs/SLOs per tier, map to monitors/dashboards, alert taxonomy, incident SLAs.
  - residency-compliance (simple): Region mapping, data flow inventory, backup/restore and retention policy templates.


# Future Agents Proposed

- identity-integrations — Owns SSO/SAML implementations, metadata (SAML/XML, OIDC), SCIM provisioning, B2B identity playbooks, and test suites.
- rbac-abac-designer — Produces RBAC/ABAC matrices, UI guardrail patterns, API policy hooks, and DB RLS alignment.
- sla-operations — Connects business SLAs to engineering SLOs; defines alerting and escalation runbooks.
- residency-compliance — Maps data stores and flows to residency/retention requirements; produces audit-ready documentation.


# Options Considered

- Adopt everything as-is: Rejected due to frontmatter non-compliance across agents.
- Reject proposals: Rejected; proposals fill meaningful gaps (product, architecture, observability, HR, learning design, automation).
- Adopt with light fixes (chosen): Add missing `model: sonnet` to agents; accept skills/commands unchanged.


# Decision

- Agents: Adopt after adding `model: sonnet` to all six agent files in `agents-to-build/.claude/agents/`.
- Skills: Adopt acceptance-criteria-checker, audit-event-schema, c4-diagram-template as-is.
- Commands: Adopt ac-check, arch-c4, audit-setup as-is.
- Create follow-up proposals for identity-integrations, rbac-abac-designer, sla-operations, residency-compliance.


# Risks and Mitigations

- Risk: Ambiguity between `system-architect` and existing `infrastructure-specialist`/`api-builder` responsibilities.
  - Mitigation: Keep `system-architect` at decision/coordination level; delegate implementation to domain agents.
- Risk: Compliance requirements evolve (e.g., SSO/SSO flows, residency rules).
  - Mitigation: Add dedicated identity/residency agents; maintain checklists/templates under `docs/`.
- Risk: Overlap with `meta-agent-v3` generation patterns.
  - Mitigation: Ensure simple agents do not claim orchestrator semantics; if orchestration is needed, reclassify and move to domain paths with required phases/skills.


# Implementation Notes

Required edits prior to merge (agents-to-build → MegaCampusAI):
- Add frontmatter line `model: sonnet` to:
  - `.claude/agents/product-manager.md`
  - `.claude/agents/learning-designer.md`
  - `.claude/agents/logging-and-audit.md`
  - `.claude/agents/hr-people-ops.md`
  - `.claude/agents/ai-automation.md`
  - `.claude/agents/system-architect.md`

Integration steps after adoption:
- Place agent files under `.claude/agents/` (simple type) with updated frontmatter.
- Place skills under `.claude/skills/` and ensure templates retained.
- Place commands under `.claude/commands/`.
- Cross-link: Update `system-architect` to reference `/arch-c4`; `logging-and-audit` to reference `/audit-setup`; `product-manager` to reference `/ac-check` (already present).

References
- Schema and orchestration rules: `.claude/agents/meta-agent-v3.md`
- Roadmap requirements reference: `agents-to-build/docs/Дорожная карта LMS – v1 → v2 → AI‑будущее.md` (requirements only)
- LMS context: `agents-to-build/docs/LMSv1.md`

Acceptance Criteria for Merge
- [ ] All six proposed agents include frontmatter `model: sonnet`.
- [ ] Skills `acceptance-criteria-checker`, `audit-event-schema`, `c4-diagram-template` added under `.claude/skills/`.
- [ ] Commands `ac-check`, `arch-c4`, `audit-setup` added under `.claude/commands/` with frontmatter `description`.
- [ ] No orchestrator/worker semantics used in these agents; otherwise reclassified per meta-agent-v3.
- [ ] Coverage table status remains ≥ current (no regressions); open gaps tracked with new agent proposals.

